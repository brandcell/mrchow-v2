{% comment %} {%- assign headings_font = settings.headings_font -%} {% endcomment %}
{%- assign body_font = settings.body_font -%}

{% comment %} {%- unless headings_font.system? -%} {% endcomment %}
<link rel="preload" href="{{'PPAcma-Black.woff2' | asset_url }}" as="font" type="font/otf" crossorigin>
{% comment %}
{% endcomment %}
{% comment %} {%- endunless -%} {% endcomment %}

{%- unless body_font.system? -%}
  <link rel="preload" href="{{ body_font | font_url }}" as="font" type="font/woff2" crossorigin>
{%- endunless -%}

<style type="text/css">
  /* Define the fallback font stack */
  body {
    font-family: {{ body_font.family }}, {{ body_font.fallback_families }};
  }

  {%- comment -%} Fonts   /* echo headings_font | font_face: font_display: 'swap' */{%- endcomment -%}
  {%- liquid
    echo body_font | font_face: font_display: 'swap'
    assign body_font_bold = body_font | font_modify: 'weight', '+100'
    if body_font_bold == blank
      assign body_font_bold = body_font | font_modify: 'weight', '700'
    endif
    echo body_font_bold | font_face: font_display: 'swap'
    assign body_font_italic = body_font | font_modify: 'style', 'italic'
    if body_font_italic
      echo body_font_italic | font_face: font_display: 'swap'
    endif
  -%}

  {%- comment -%} Header Colors {% endcomment %}
  {%- liquid
    assign color_background_header = settings.color_background_header
    assign color_text_header = settings.color_text_header
    assign color_accent_header = settings.color_accent_header
    assign brightness_text_header = color_text_header | color_brightness
    if brightness_text_header > 150
      assign color_foreground_header = '#000'
    else
      assign color_foreground_header = '#fff'
    endif
    assign brightness_accent_header = color_accent_header | color_brightness
    if brightness_accent_header > 150
      assign color_foreground_accent_header = '#000'
    else
      assign color_foreground_accent_header = '#fff'
    endif
    assign color_borders_header = color_text_header | color_modify: 'alpha', 0.1
    assign color_secondary_background_header = color_text_header | color_modify: 'alpha', 0.08
    assign color_opacity_background_header = color_background_header | color_modify: 'alpha', 0
  -%}

  {%- comment -%} Card colors {% endcomment %}
  {%- liquid
    assign color_background_cards = settings.color_background_cards
    assign color_text_cards = settings.color_text_cards
    assign color_accent_cards = settings.color_accent_cards
    assign brightness_accent_cards = color_accent_cards | color_brightness
    if brightness_accent_cards > 150
      assign color_foreground_accent_cards = '#000'
    else
      assign color_foreground_accent_cards = '#fff'
    endif
    assign brightness_text_cards = color_text_cards | color_brightness
    if brightness_text_cards > 150
      assign color_foreground_cards = '#000'
    else
      assign color_foreground_cards = '#fff'
    endif
    assign color_borders_cards = settings.color_borders_cards
    assign color_secondary_text_cards = color_text_cards | color_modify: 'alpha', 0.6
  -%}

  {%- comment -%} Footer Colors {% endcomment %}
  {%- liquid
    assign color_background_footer = settings.color_background_footer
    assign color_text_footer = settings.color_text_footer
    assign color_accent_footer = settings.color_accent_footer
    assign color_borders_footer = color_text_footer | color_modify: 'alpha', 0.15
  -%}

  {%- comment -%} Main Colors {% endcomment %}
  {%- liquid
    assign color_background_main = settings.color_background_main
    assign color_text_main = settings.color_text_main
    assign color_accent_main = settings.color_accent_main
    assign brightness_accent_main = color_accent_main | color_brightness
    if brightness_accent_main > 150
      assign color_foreground_accent_main = '#000'
    else
      assign color_foreground_accent_main = '#fff'
    endif
    assign brightness_text_main = color_text_main | color_brightness
    if brightness_text_main > 150
      assign color_foreground_main = '#000'
    else
      assign color_foreground_main = '#fff'
    endif
    assign color_borders_main = color_text_main | color_modify: 'alpha', 0.15
    assign color_secondary_background_main = color_text_main | color_modify: 'alpha', 0.08
    assign color_third_background_main = color_text_main | color_modify: 'alpha', 0.04
    assign color_fourth_background_main = color_text_main | color_modify: 'alpha', 0.02
    assign color_secondary_text_main = color_text_main | color_modify: 'alpha', 0.62
    assign color_borders_forms_primary = color_text_main | color_modify: 'alpha', 0.3
    assign color_borders_forms_secondary = color_text_main | color_modify: 'alpha', 0.6
    assign color_opacity_background_main = color_background_main | color_modify: 'alpha', 0
  -%}
</style>

<style type="text/css">
  :root {
    /* Direction */
    --direction: {{ direction }};
    /* Font variables */
    --font-stack-headings: "PP Acma";
    --font-weight-headings: 600;
    --font-style-headings: normal;
    --font-stack-body: {{ body_font.family }}, {{ body_font.fallback_families }};
    --font-weight-body: {{ body_font.weight }};
    {%- if body_font_bold -%}
      --font-weight-body-bold: {{ body_font_bold.weight }};
    {%- else -%}
      --font-weight-body-bold: 700;
    {%- endif -%}
    {%- if body_font_italic -%}
      --font-style-body-italic: italic;
    {%- else -%}
      --font-style-body-italic: normal;
    {%- endif -%}
    {%- if body_font.bold_style -%}
      --font-style-body-bold: {{ body_font.bold_style }};
    {%- else -%}
      --font-style-body-bold: normal;
    {%- endif -%}
    --font-size-base: {{ settings.font_size_base }};
    --font-size-small: {{ settings.font_size_small }};
    --font-size-large: {{ settings.font_size_large }};
    --font-size-huge: {{ settings.font_size_huge }};
    --line-height-base: {{ settings.line_height_base }};
    --line-height-small: {{ settings.line_height_small }};
    --line-height-large: {{ settings.line_height_large }};
    --line-height-huge: {{ settings.line_height_huge }};
    --font-size-h1: {{ settings.font_size_h1 }};
    --font-size-h2: {{ settings.font_size_h2 }};
    --font-size-h3: {{ settings.font_size_h3 }};
    --font-size-h4: {{ settings.font_size_h4 }};
    --font-size-h5: {{ settings.font_size_h5 }};
    --font-size-h6: {{ settings.font_size_h6 }};
    --line-height-h1: {{ settings.line_height_h1 }};
    --line-height-h2: {{ settings.line_height_h2 }};
    --line-height-h3: {{ settings.line_height_h3 }};
    --line-height-h4: {{ settings.line_height_h4 }};
    --line-height-h5: {{ settings.line_height_h5 }};
    --line-height-h6: {{ settings.line_height_h6 }};
  }
</style>
